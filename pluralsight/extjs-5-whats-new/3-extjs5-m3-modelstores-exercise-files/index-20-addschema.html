<!DOCTYPE HTML>
<html>
<head>
<meta charset="UTF-8">

<title>TabletApp Standalone</title>

<link rel="stylesheet" type="text/css"
      href="http://cdn.sencha.com/ext/gpl/5.0.0/build/packages/ext-theme-neptune/build/resources/ext-theme-neptune-all.css">
<script type="text/javascript" src="http://cdn.sencha.com/ext/gpl/5.0.0/build/ext-all-debug.js"></script>
<script type="text/javascript">


Ext.define('TabletApp.model.Session', {
    extend: 'Ext.data.Model',

    requires: [
        'Ext.data.proxy.Rest'
    ],

// let's us not have to reference model with full name, just last part
    schema: {
        namespace: 'TabletApp.model'
    },

    fields: [
        { name: 'id', type: 'int' },
        { name: 'title', type: 'string' },
        { name: 'description', type: 'string' },
        { name: 'sessionLevelId', type: 'int'},
        { name: 'interestCount', type: 'int'},
        { name: 'approved', type: 'bool'},
        { name: 'tagId', reference: 'Tag'}
    ],

    proxy: {
        type: 'rest',
        //url: '/rest/SessionExt',
        url: '/data/sessions.json' ,
        reader: {
            type: 'json',
            rootProperty: 'data'
        }
    }


});


Ext.application({
    name: 'ProblemBindApp',

    launch: function () {
        Ext.create('Ext.container.Viewport', {
            layout: 'fit',
            items: [
                {
                    xtype: 'grid',
                    store: {
                        model: 'Session',
                        autoLoad: true
                    },
                    columns: [
                        {
                            text: 'Id',
                            dataIndex: 'id'
                        },{
                            text: 'Title',
                            dataIndex: 'title',
                            flex: 1
                        }
                    ]
                }
            ]
        });
    }

});


//        Ext.define('TabletApp.model.Session', {
//            extend: 'Ext.data.Model',
//            fields: [
//                { name: 'id', type: 'int' },
//                { name: 'title', type: 'string' },
//                { name: 'description', type: 'string' },
//                { name: 'interestCount',type: 'int'},
//                { name: 'approved', type: 'bool'},
//
//                { name: 'tagId', reference: 'Tag'}
//            ],
//
//            proxy: {
//                type: 'rest',
//                //url: '/rest/SessionExt',
//                url: '/data/sessions.json' ,
//                reader: {
//                    type: 'json',
//                    rootProperty: 'data'
//                }
//            }
//        });


//        Ext.define('TabletApp.model.Base', {
//            extend: 'Ext.data.Model',
//
//            requires: [
//                'Ext.data.proxy.Rest'
//            ],
//
//            fields: [
//                {
//                    name: 'id',
//                    type: 'int'
//                }
//            ],
//
//            schema: {
//                namespace: 'TabletApp.model'
//            }
//        });

//        Ext.define('TabletApp.model.Session', {
//            extend: 'TabletApp.model.Base',
//            requires: [
//                'TabletApp.model.Base'
//            ],
//
//            fields: [
//                { name: 'id', type: 'int' },
//                { name: 'title', type: 'string' },
//                { name: 'description', type: 'string' },
//                { name: 'interestCount',type: 'int'},
//                { name: 'approved', type: 'bool'},
//
//                { name: 'tagId', reference: 'Tag'}
//            ],
//
//            proxy: {
//                type: 'rest',
//                //url: '/rest/SessionExt',
//                url: '/data/sessions.json' ,
//                reader: {
//                    type: 'json',
//                    rootProperty: 'data'
//                }
//            }
//        });
//
//        Ext.define('TabletApp.model.Tag', {
//            extend: 'Ext.data.Model',
//            fields: [
//                { name: 'id', type: 'int' },
//                { name: 'sessionId', type: 'int', reference: 'Session' },
//                { name: 'name', type: 'string' }
//            ]
//        });
//
//
//
//
//        var myStore = Ext.create('Ext.data.Store', {
//            model: 'TabletApp.model.Session',
//            autoLoad: false
//        });
//
//        debugger;
//        myStore.load({
//            params: {
//            },
//            callback: function (records, operation, success) {
//                var sessionTemp = records[0];
//                console.log('records cnt: ' + records.length);
//                console.log('Session Title: ' + sessionTemp.get('title'));
//                debugger;
//                sessionTemp.tags(function (tags) {
//                    debugger;
//                    tags.each(function (tag) {
//                        debugger;
//                        //console.log('Tag: ' + tag.get('name'));
//                    });
//                });
//            },
//            scope: this
//        });


////        var sessionModel = Ext.create("TabletApp.model.Session");
////        sessionModel.load(10, {
////            scope: this,
////            failure: function(record, operation) {
////                debugger;
////                //do something if the load failed
////            },
////            success: function(record, operation) {
////                debugger;
////                //do something if the load succeeded
////            },
////            callback: function(record, operation, success) {
////                debugger;
////                //do something whether the load succeeded or failed
////            }
////        });
//        //var sessionStore = Ext.create("TabletApp.model.Session");


//        Ext.application({
//            name: 'ProblemBindApp',

//            launch: function () {


//                Ext.create('Ext.container.Viewport', {
//                    height: 300,
//                    width: 300,
//                    autoShow: true,

//                    viewModel: {
//                        data: {
//                            firstName: 'Peter',
//                            lastName: 'Kellner'
//                        }
//                    },
//                    bind: {
//                        data: {
//                            first: '{firstName}',
//                            last: '{lastName}'
//                        }
//                    },
//                    tpl: 'FullName: {first} {last}'


//                });
//            }
//        });


</script>


</head>
<body></body>
</html>
